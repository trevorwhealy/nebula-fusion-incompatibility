"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var FunctionCache = function () {
  function FunctionCache(targetFunction) {
    _classCallCheck(this, FunctionCache);

    this._function = targetFunction;
  }

  _createClass(FunctionCache, [{
    key: "_compareArgs",
    value: function _compareArgs(args) {
      if (!this._lastParameters) {
        return false;
      }

      if (this._lastParameters.length !== args.length) {
        return false;
      }

      for (var i = 0; i < args.length; i++) {
        if (this._lastParameters[i] !== args[i]) {
          return false;
        }
      }

      return true;
    }
  }, {
    key: "call",
    value: function call() {
      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
        args[_key] = arguments[_key];
      }

      if (this._compareArgs(args) === false) {
        this._lastResult = this._function.apply(null, args);
        this._lastParameters = args;
      }

      return this._lastResult;
    }
  }, {
    key: "invalidate",
    value: function invalidate() {
      this._lastParameters = null;
      return this;
    }
  }, {
    key: "updateTrigger",
    value: function updateTrigger(_updateTrigger) {
      if (this._updateTrigger !== _updateTrigger) {
        this._updateTrigger = _updateTrigger;
        this.invalidate();
      }

      return this;
    }
  }]);

  return FunctionCache;
}();

exports.default = FunctionCache;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9saWIvZnVuY3Rpb24tY2FjaGUuanMiXSwibmFtZXMiOlsiRnVuY3Rpb25DYWNoZSIsInRhcmdldEZ1bmN0aW9uIiwiX2Z1bmN0aW9uIiwiYXJncyIsIl9sYXN0UGFyYW1ldGVycyIsImxlbmd0aCIsImkiLCJfY29tcGFyZUFyZ3MiLCJfbGFzdFJlc3VsdCIsImFwcGx5IiwidXBkYXRlVHJpZ2dlciIsIl91cGRhdGVUcmlnZ2VyIiwiaW52YWxpZGF0ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQUlxQkEsYTtBQU1uQix5QkFBWUMsY0FBWixFQUErQjtBQUFBOztBQUM3QixTQUFLQyxTQUFMLEdBQWlCRCxjQUFqQjtBQUNEOzs7O2lDQUVZRSxJLEVBQTZCO0FBQ3hDLFVBQUksQ0FBQyxLQUFLQyxlQUFWLEVBQTJCO0FBQ3pCLGVBQU8sS0FBUDtBQUNEOztBQUVELFVBQUksS0FBS0EsZUFBTCxDQUFxQkMsTUFBckIsS0FBZ0NGLEtBQUtFLE1BQXpDLEVBQWlEO0FBQy9DLGVBQU8sS0FBUDtBQUNEOztBQUVELFdBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJSCxLQUFLRSxNQUF6QixFQUFpQ0MsR0FBakMsRUFBc0M7QUFDcEMsWUFBSSxLQUFLRixlQUFMLENBQXFCRSxDQUFyQixNQUE0QkgsS0FBS0csQ0FBTCxDQUFoQyxFQUF5QztBQUN2QyxpQkFBTyxLQUFQO0FBQ0Q7QUFDRjs7QUFFRCxhQUFPLElBQVA7QUFDRDs7OzJCQUc2QztBQUFBLHdDQUF0Q0gsSUFBc0M7QUFBdENBLFlBQXNDO0FBQUE7O0FBQzVDLFVBQUksS0FBS0ksWUFBTCxDQUFrQkosSUFBbEIsTUFBNEIsS0FBaEMsRUFBdUM7QUFDckMsYUFBS0ssV0FBTCxHQUFtQixLQUFLTixTQUFMLENBQWVPLEtBQWYsQ0FBcUIsSUFBckIsRUFBMkJOLElBQTNCLENBQW5CO0FBQ0EsYUFBS0MsZUFBTCxHQUF1QkQsSUFBdkI7QUFDRDs7QUFFRCxhQUFPLEtBQUtLLFdBQVo7QUFDRDs7O2lDQUU4QjtBQUM3QixXQUFLSixlQUFMLEdBQXVCLElBQXZCO0FBQ0EsYUFBTyxJQUFQO0FBQ0Q7OztrQ0FFYU0sYyxFQUFxQztBQUNqRCxVQUFJLEtBQUtDLGNBQUwsS0FBd0JELGNBQTVCLEVBQTJDO0FBQ3pDLGFBQUtDLGNBQUwsR0FBc0JELGNBQXRCO0FBQ0EsYUFBS0UsVUFBTDtBQUNEOztBQUVELGFBQU8sSUFBUDtBQUNEOzs7Ozs7a0JBbERrQlosYSIsImZpbGUiOiJmdW5jdGlvbi1jYWNoZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEBmbG93XG5cbnR5cGUgRXh0cmFjdFJldHVyblR5cGUgPSA8Uj4oKC4uLmFyZ3M6IG1peGVkKSA9PiBSKSA9PiBSO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGdW5jdGlvbkNhY2hlPFQ6IEZ1bmN0aW9uLCBVVCA9IGFueT4ge1xuICBfZnVuY3Rpb246IFQ7XG4gIF9sYXN0UGFyYW1ldGVyczogP0FycmF5PG1peGVkPjtcbiAgX2xhc3RSZXN1bHQ6ICRDYWxsPEV4dHJhY3RSZXR1cm5UeXBlLCBUPjtcbiAgX3VwZGF0ZVRyaWdnZXI6IFVUO1xuXG4gIGNvbnN0cnVjdG9yKHRhcmdldEZ1bmN0aW9uOiBUKSB7XG4gICAgdGhpcy5fZnVuY3Rpb24gPSB0YXJnZXRGdW5jdGlvbjtcbiAgfVxuXG4gIF9jb21wYXJlQXJncyhhcmdzOiBBcnJheTxtaXhlZD4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuX2xhc3RQYXJhbWV0ZXJzKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX2xhc3RQYXJhbWV0ZXJzLmxlbmd0aCAhPT0gYXJncy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICh0aGlzLl9sYXN0UGFyYW1ldGVyc1tpXSAhPT0gYXJnc1tpXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBjYWxsOiBUO1xuICBjYWxsKC4uLmFyZ3M6ICopOiAkQ2FsbDxFeHRyYWN0UmV0dXJuVHlwZSwgVD4ge1xuICAgIGlmICh0aGlzLl9jb21wYXJlQXJncyhhcmdzKSA9PT0gZmFsc2UpIHtcbiAgICAgIHRoaXMuX2xhc3RSZXN1bHQgPSB0aGlzLl9mdW5jdGlvbi5hcHBseShudWxsLCBhcmdzKTtcbiAgICAgIHRoaXMuX2xhc3RQYXJhbWV0ZXJzID0gYXJncztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fbGFzdFJlc3VsdDtcbiAgfVxuXG4gIGludmFsaWRhdGUoKTogRnVuY3Rpb25DYWNoZTxUPiB7XG4gICAgdGhpcy5fbGFzdFBhcmFtZXRlcnMgPSBudWxsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgdXBkYXRlVHJpZ2dlcih1cGRhdGVUcmlnZ2VyOiBVVCk6IEZ1bmN0aW9uQ2FjaGU8VD4ge1xuICAgIGlmICh0aGlzLl91cGRhdGVUcmlnZ2VyICE9PSB1cGRhdGVUcmlnZ2VyKSB7XG4gICAgICB0aGlzLl91cGRhdGVUcmlnZ2VyID0gdXBkYXRlVHJpZ2dlcjtcbiAgICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iXX0=