{"version":3,"file":"index.es.js","sources":["../src/dev-tool.js","../src/index.js"],"sourcesContent":["/* eslint-env browser */\n/* global module */\n\nexport function addDebugMetadata(instance, stackIndex) {\n  const {stack, stacktrace, message} = new Error(\"stacktrace source\");\n  instance.debugStackInfo = {stack, stacktrace, message};\n  instance.debugStackIndex = stackIndex;\n}\n\nexport class DebugEngine {\n  constructor(worker) {\n    if (!worker) {\n      const workerBlob = new Blob(\n        [\n          `importScripts(\"https://unpkg.com/css-to-js-sourcemap-worker@2.0.1/worker.js\")`,\n        ],\n        {type: \"application/javascript\"},\n      );\n      worker = new Worker(URL.createObjectURL(workerBlob));\n      worker.postMessage({\n        id: \"init_wasm\",\n        url: \"https://unpkg.com/css-to-js-sourcemap-worker@2.0.1/mappings.wasm\",\n      });\n      worker.postMessage({\n        id: \"set_render_interval\",\n        interval: 120,\n      });\n      if (module.hot) {\n        module.hot.addStatusHandler(status => {\n          if (status === \"dispose\") {\n            worker.postMessage({id: \"invalidate\"});\n          }\n        });\n      }\n    }\n    this.worker = worker;\n    this.counter = 0;\n    this.worker.onmessage = msg => {\n      const {id, css} = msg.data;\n      if (id === \"render_css\" && css) {\n        const style = document.createElement(\"style\");\n        style.appendChild(document.createTextNode(css));\n        document.head.appendChild(style);\n      }\n    };\n  }\n\n  debug({stackIndex, stackInfo}) {\n    const className = `__debug-${this.counter++}`;\n    this.worker.postMessage({\n      id: \"add_mapped_class\",\n      className,\n      stackInfo,\n      stackIndex,\n    });\n    return className;\n  }\n}\n","// @flow\n\ndeclare var __DEV__: boolean;\ndeclare var __BROWSER__: boolean;\n\nimport type {\n  Ref,\n  StatelessFunctionalComponent,\n  ElementType,\n  ElementConfig,\n} from \"react\";\nimport React, {createElement, Component} from \"react\";\n\nimport createReactContext, {type Context} from \"create-react-context\";\n\nimport {addDebugMetadata, DebugEngine} from \"./dev-tool.js\";\n\nexport {DebugEngine};\n\nconst StyletronContext: Context<any> = createReactContext();\n\nconst HydrationContext: Context<boolean> = createReactContext(false);\n\nconst DebugEngineContext: Context<any> = createReactContext();\n\nclass DevProvider extends Component<any, {hydrating: boolean}> {\n  constructor(props: any) {\n    super();\n    this.state = {\n      hydrating: Boolean(props.debugAfterHydration),\n    };\n  }\n\n  componentDidMount() {\n    if (__BROWSER__) {\n      if (this.state.hydrating === true) {\n        this.setState({hydrating: false});\n      }\n    }\n  }\n\n  render() {\n    return (\n      <StyletronContext.Provider value={this.props.value}>\n        <DebugEngineContext.Provider value={this.props.debug}>\n          <HydrationContext.Provider value={this.state.hydrating}>\n            {this.props.children}\n          </HydrationContext.Provider>\n        </DebugEngineContext.Provider>\n      </StyletronContext.Provider>\n    );\n  }\n}\n\nexport const Provider =\n  __BROWSER__ && __DEV__ ? DevProvider : StyletronContext.Provider;\n\nexport function DevConsumer(props: any) {\n  return (\n    <StyletronContext.Consumer>\n      {styletronEngine => (\n        <DebugEngineContext.Consumer>\n          {debugEngine => (\n            <HydrationContext.Consumer>\n              {hydrating =>\n                props.children(styletronEngine, debugEngine, hydrating)\n              }\n            </HydrationContext.Consumer>\n          )}\n        </DebugEngineContext.Consumer>\n      )}\n    </StyletronContext.Consumer>\n  );\n}\n\nconst Consumer =\n  __BROWSER__ && __DEV__ ? DevConsumer : StyletronContext.Consumer;\n\nexport type styledElementProps<Base> = {\n  $as?: Base,\n  $ref?: Ref<*>,\n};\n\nexport type reducerT<Style: Object, Props: Object = {}> = (\n  style: Style,\n  props: Props,\n) => Style;\n\nexport type assignCommutativeReducerT<Style: Object> = reducerT<Style> & {\n  style: Style,\n  factory: Style => reducerT<Style>,\n};\n\nexport type assignCommutativeReducerItemT<Style: Object> = {|\n  assignCommutative: true,\n  reducer: assignCommutativeReducerT<Style>,\n|};\n\nexport type regularReducerItemT<Style: Object, Props: Object> = {|\n  assignCommutative: false,\n  reducer: reducerT<Style, Props>,\n|};\n\nexport type reducerItemT<Style: Object, Props: Object> =\n  | assignCommutativeReducerItemT<Style>\n  | regularReducerItemT<Style, Props>;\n\nexport type driverT<Style: Object, Engine> = (\n  style: Style,\n  styletron: Engine,\n) => string;\n\nexport type wrapperT = (\n  StatelessFunctionalComponent<*>,\n) => StatelessFunctionalComponent<*>;\n\n/* eslint-disable no-unused-vars */\nexport type styletronT<Style: Object, Props: Object, Base, Engine> = {|\n  // TODO: Variadic generics for multiple reducer prop types?\n  // Look into $Compose?\n  reducers: Array<reducerItemT<Style, any>>,\n  base: ElementType,\n  getInitialStyle: () => Style,\n  driver: driverT<Style, Engine>,\n  wrapper: any,\n  debugStackInfo?: any,\n  debugStackIndex?: any,\n|};\n/* eslint-enable no-unused-vars */\n\n/* eslint-disable no-unused-vars */\nexport type styletronComponentT<\n  Style: Object,\n  Props: Object,\n  Base,\n  Engine,\n> = StatelessFunctionalComponent<\n  Props &\n    styledElementProps<Base> &\n    $Diff<ElementConfig<Base>, {className: any}>,\n>;\n/* eslint-enable no-unused-vars */\n\nexport type styledFnT<Style: Object, Engine> = <Props: Object, Base>(\n  Base,\n  styleArgT<Style, Props>,\n) => styletronComponentT<Style, Props, Base, Engine>;\n\ntype styledConfig<Style: Object, Engine> = {\n  getInitialStyle: void => Style,\n  driver: driverT<Style, Engine>,\n  wrapper: wrapperT,\n};\n\nexport function createStyled<Style: Object, Engine>({\n  getInitialStyle,\n  driver,\n  wrapper,\n}: styledConfig<Style, Engine>): styledFnT<Style, Engine> {\n  return function styled<Props: Object, Base>(\n    base: Base,\n    styleArg: styleArgT<Style, Props>,\n  ): styletronComponentT<Style, Props, Base, Engine> {\n    const baseStyletron: styletronT<Style, {}, Base, Engine> = {\n      reducers: [],\n      // TODO: use typed generic instead of coercion once\n      // https://github.com/facebook/flow/issues/6157 is resolved\n      base: ((base: any): ElementType),\n      driver,\n      getInitialStyle,\n      wrapper,\n    };\n    if (__BROWSER__ && __DEV__) {\n      addDebugMetadata(baseStyletron, 2);\n    }\n    return createStyledElementComponent(\n      autoComposeShallow(baseStyletron, styleArg),\n    );\n  };\n}\n\nexport function withTransform<\n  Style: Object,\n  Props: Object,\n  Base,\n  TransformerProps: Object,\n  Engine,\n>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  transformer: (style: Style, props: TransformerProps) => Style,\n): styletronComponentT<Style, Props & TransformerProps, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(styletron, 2);\n  }\n\n  return createStyledElementComponent(\n    composeDynamic(styletron, {\n      assignCommutative: false,\n      reducer: transformer,\n    }),\n  );\n}\n\ntype styleFnArgT<Style: Object, Props: Object> = (props: Props) => Style;\n\nexport type styleArgT<Style: Object, Props: Object> =\n  | Style\n  | styleFnArgT<Style, Props>;\n\nexport function withStyle<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronComponentT<Style, Props & ReducerProps, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(styletron, 2);\n  }\n  return createStyledElementComponent(autoComposeShallow(styletron, styleArg));\n}\n\nexport function withStyleDeep<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronComponentT<Style, Props & ReducerProps, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(styletron, 2);\n  }\n  return createStyledElementComponent(autoComposeDeep(styletron, styleArg));\n}\n\nexport function withWrapper<Style: Object, Props: Object, Base, Engine>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  wrapper: any,\n): styletronComponentT<Style, Props, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  const composed = {\n    getInitialStyle: styletron.getInitialStyle,\n    base: styletron.base,\n    driver: styletron.driver,\n    wrapper: wrapper,\n    reducers: styletron.reducers,\n  };\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(composed, 2);\n  }\n  return createStyledElementComponent(composed);\n}\n\nexport function autoComposeShallow<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  if (typeof styleArg === \"function\") {\n    return dynamicComposeShallow(styletron, styleArg);\n  }\n  // TODO: investigate how to eliminate this casting\n  return (staticComposeShallow(styletron, styleArg): any);\n}\n\nexport function autoComposeDeep<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  if (typeof styleArg === \"function\") {\n    return dynamicComposeDeep(styletron, styleArg);\n  }\n  // TODO: investigate how to eliminate this casting\n  return (staticComposeDeep(styletron, styleArg): any);\n}\n\nexport function staticComposeShallow<\n  Style: Object,\n  Props: Object,\n  Base,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  style: Style,\n): styletronT<Style, Props, Base, Engine> {\n  return composeStatic(styletron, {\n    reducer: createShallowMergeReducer(style),\n    assignCommutative: true,\n  });\n}\n\nexport function staticComposeDeep<Style: Object, Props: Object, Base, Engine>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  style: Style,\n): styletronT<Style, Props, Base, Engine> {\n  return composeStatic(styletron, {\n    reducer: createDeepMergeReducer(style),\n    assignCommutative: true,\n  });\n}\n\nexport function dynamicComposeShallow<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleFn: (props: ReducerProps) => Style,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  return composeDynamic(styletron, {\n    assignCommutative: false,\n    reducer: toMergeReducer(styleFn, shallowMerge),\n  });\n}\n\nexport function dynamicComposeDeep<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleFn: (props: ReducerProps) => Style,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  return composeDynamic(styletron, {\n    assignCommutative: false,\n    reducer: toMergeReducer(styleFn, deepMerge),\n  });\n}\n\nexport function toMergeReducer<Style: Object, Props: Object>(\n  fn: (props: Props) => Style,\n  mergeFn: (a: Style, b: Style) => Style,\n): reducerT<Style, Props> {\n  return (style: Style, props: Props) => mergeFn(style, fn(props));\n}\n\nexport function createShallowMergeReducer<Style: Object>(\n  style: Style,\n): assignCommutativeReducerT<Style> {\n  // TODO: make this casting unnecessary\n  function shallowMergeReducer(inputStyle) {\n    return ((shallowMerge(inputStyle, style): any): Style);\n  }\n  shallowMergeReducer.factory = createShallowMergeReducer;\n  shallowMergeReducer.style = style;\n  return shallowMergeReducer;\n}\n\nexport function createDeepMergeReducer<Style: Object>(\n  style: Style,\n): assignCommutativeReducerT<Style> {\n  // TODO: make this casting unnecessary\n  function deepMergeReducer(inputStyle) {\n    return ((deepMerge(inputStyle, style): any): Style);\n  }\n  deepMergeReducer.factory = createDeepMergeReducer;\n  deepMergeReducer.style = style;\n  return deepMergeReducer;\n}\n\nexport function composeStatic<Style: Object, Props: Object, Base, Engine>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  reducer: reducerItemT<Style, Props>,\n): styletronT<Style, Props, Base, Engine> {\n  if (styletron.reducers.length === 0) {\n    // TODO: remove this casting\n    const style = reducer.reducer(styletron.getInitialStyle(), ({}: any));\n    return {\n      reducers: styletron.reducers,\n      base: styletron.base,\n      driver: styletron.driver,\n      debugStackIndex: styletron.debugStackIndex,\n      debugStackInfo: styletron.debugStackInfo,\n      wrapper: styletron.wrapper,\n      getInitialStyle: () => style,\n    };\n  } else {\n    const last = styletron.reducers[0];\n    if (last.assignCommutative === true && reducer.assignCommutative === true) {\n      // TODO: remove prop argument for static reducers\n      const composed = reducer.reducer(last.reducer.style, {});\n\n      return {\n        getInitialStyle: styletron.getInitialStyle,\n        base: styletron.base,\n        debugStackIndex: styletron.debugStackIndex,\n        debugStackInfo: styletron.debugStackInfo,\n        driver: styletron.driver,\n        wrapper: styletron.wrapper,\n        reducers: [\n          {\n            assignCommutative: true,\n            reducer: last.reducer.factory(composed),\n          },\n        ].concat(styletron.reducers.slice(1)),\n      };\n    }\n    return composeDynamic(styletron, reducer);\n  }\n}\n\nexport function composeDynamic<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  reducer: reducerItemT<Style, ReducerProps>,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  return {\n    getInitialStyle: styletron.getInitialStyle,\n    base: styletron.base,\n    debugStackIndex: styletron.debugStackIndex,\n    debugStackInfo: styletron.debugStackInfo,\n    driver: styletron.driver,\n    wrapper: styletron.wrapper,\n    reducers: [reducer].concat(styletron.reducers),\n  };\n}\n\nexport function createStyledElementComponent<\n  Style: Object,\n  Props: Object,\n  Base,\n  Engine,\n>({\n  reducers,\n  base,\n  driver,\n  debugStackInfo,\n  debugStackIndex,\n  wrapper,\n  getInitialStyle,\n}: styletronT<Style, Props, Base, Engine>): styletronComponentT<\n  Style,\n  Props,\n  Base,\n  Engine,\n> {\n  // TODO: make casting not necessary\n  function omitPrefixedKeys<T>(source: T): $Diff<T, Props> {\n    const result = ({}: any);\n    for (const key in (source: any)) {\n      if (key[0] !== \"$\") {\n        result[key] = (source: any)[key];\n      }\n    }\n    return ((result: any): $Diff<T, Props>);\n  }\n\n  if (__DEV__ && __BROWSER__) {\n    var debugClassName;\n  }\n\n  function StyledElement(props) {\n    return (\n      <Consumer>\n        {(styletron, debugEngine, hydrating) => {\n          if (__DEV__ && styletron === void 0) {\n            throw new Error(`\nA Styletron styled component was rendered, but no Styletron engine instance was provided in React context.\n\nDid you forget to provide a Styletron engine instance to React context via using the Styletron provider component?\n\nNote: Providers and Consumers must come from the exact same React.createContext call to work.\nIf your app has multiple instances of the \"styletron-react-core\" package in your node_module tree,\nyour Provider may be coming from a different React.createContext call, which means the styled components\nwill not recieve the provided engine instance. This scenario can arise, for example, when using \"npm link\".\n`);\n          }\n\n          const elementProps = omitPrefixedKeys(props);\n          const style = resolveStyle(getInitialStyle, reducers, props);\n          const styleClassString = driver(style, styletron);\n          const element = props.$as ? props.$as : base;\n\n          elementProps.className = props.className\n            ? `${props.className} ${styleClassString}`\n            : styleClassString;\n\n          if (__DEV__ && __BROWSER__ && debugEngine && !hydrating) {\n            if (!debugClassName) {\n              debugClassName = debugEngine.debug({\n                stackInfo: debugStackInfo,\n                stackIndex: debugStackIndex,\n              });\n            }\n            const joined = `${debugClassName} ${elementProps.className}`;\n            elementProps.className = joined;\n          }\n\n          if (props.$ref) {\n            elementProps.ref = props.$ref;\n          }\n\n          return createElement(element, elementProps);\n        }}\n      </Consumer>\n    );\n  }\n\n  const Wrapped = wrapper(StyledElement);\n\n  Wrapped.__STYLETRON__ = {base, reducers, driver, wrapper, getInitialStyle};\n\n  if (__DEV__) {\n    let displayName;\n    if (typeof base === \"string\") {\n      displayName = base;\n    } else if (base.displayName) {\n      displayName = base.displayName;\n    } else if (base.name) {\n      displayName = base.name;\n    } else {\n      displayName = \"Unknown\";\n    }\n    Wrapped.displayName = `Styled(${displayName})`;\n  }\n  return Wrapped;\n}\n\nexport function resolveStyle<Style: Object, Props: Object>(\n  getInitialStyle: () => Style,\n  reducers: Array<reducerItemT<Style, Props>>,\n  props: Props,\n): Style {\n  let result = getInitialStyle();\n  let i = reducers.length;\n  while (i--) {\n    result = reducers[i].reducer(result, props);\n  }\n  return result;\n}\n\nexport function isObject(x: any) {\n  return typeof x === \"object\" && x !== null;\n}\n\nexport function deepMerge<Style: Object>(a: Style, b: Style): Style {\n  const result = assign({}, a);\n  for (const key in b) {\n    const val = b[key];\n    if (isObject(val) && isObject(a[key])) {\n      result[key] = deepMerge(a[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n  // TODO: make this casting unecessary\n  return (result: any);\n}\n\nexport function shallowMerge<Style: Object>(a: Style, b: Style): Style {\n  // TODO: make this casting unecessary\n  return assign(assign((({}: any): Style), a), b);\n}\n\nexport function assign<Style: Object>(target: Style, source: Style): Style {\n  for (const key in source) {\n    target[key] = source[key];\n  }\n  return target;\n}\n"],"names":["DebugEngine","worker","workerBlob","Blob","Worker","URL","createObjectURL","postMessage","module","hot","addStatusHandler","status","counter","onmessage","msg","data","id","css","style","document","createElement","appendChild","createTextNode","head","className","StyletronContext","createReactContext","HydrationContext","DebugEngineContext","Provider","DevConsumer","props","styletronEngine","debugEngine","hydrating","children","Consumer","createStyled","styled","base","styleArg","baseStyletron","createStyledElementComponent","autoComposeShallow","withTransform","component","transformer","styletron","__STYLETRON__","composeDynamic","withStyle","withStyleDeep","autoComposeDeep","withWrapper","wrapper","composed","getInitialStyle","driver","reducers","dynamicComposeShallow","staticComposeShallow","dynamicComposeDeep","staticComposeDeep","composeStatic","createShallowMergeReducer","createDeepMergeReducer","styleFn","toMergeReducer","shallowMerge","deepMerge","fn","mergeFn","shallowMergeReducer","inputStyle","factory","deepMergeReducer","reducer","length","debugStackIndex","debugStackInfo","last","assignCommutative","concat","slice","omitPrefixedKeys","source","result","key","debugClassName","StyledElement","Error","elementProps","resolveStyle","styleClassString","element","$as","debug","joined","$ref","ref","Wrapped","displayName","name","i","isObject","x","a","b","assign","val","target"],"mappings":"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"}