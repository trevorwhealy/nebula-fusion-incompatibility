{"version":3,"file":"browser.es5.js","sources":["../src/dev-tool.js","../src/index.js"],"sourcesContent":["/* eslint-env browser */\n/* global module */\n\nexport function addDebugMetadata(instance, stackIndex) {\n  const {stack, stacktrace, message} = new Error(\"stacktrace source\");\n  instance.debugStackInfo = {stack, stacktrace, message};\n  instance.debugStackIndex = stackIndex;\n}\n\nexport class DebugEngine {\n  constructor(worker) {\n    if (!worker) {\n      const workerBlob = new Blob(\n        [\n          `importScripts(\"https://unpkg.com/css-to-js-sourcemap-worker@2.0.1/worker.js\")`,\n        ],\n        {type: \"application/javascript\"},\n      );\n      worker = new Worker(URL.createObjectURL(workerBlob));\n      worker.postMessage({\n        id: \"init_wasm\",\n        url: \"https://unpkg.com/css-to-js-sourcemap-worker@2.0.1/mappings.wasm\",\n      });\n      worker.postMessage({\n        id: \"set_render_interval\",\n        interval: 120,\n      });\n      if (module.hot) {\n        module.hot.addStatusHandler(status => {\n          if (status === \"dispose\") {\n            worker.postMessage({id: \"invalidate\"});\n          }\n        });\n      }\n    }\n    this.worker = worker;\n    this.counter = 0;\n    this.worker.onmessage = msg => {\n      const {id, css} = msg.data;\n      if (id === \"render_css\" && css) {\n        const style = document.createElement(\"style\");\n        style.appendChild(document.createTextNode(css));\n        document.head.appendChild(style);\n      }\n    };\n  }\n\n  debug({stackIndex, stackInfo}) {\n    const className = `__debug-${this.counter++}`;\n    this.worker.postMessage({\n      id: \"add_mapped_class\",\n      className,\n      stackInfo,\n      stackIndex,\n    });\n    return className;\n  }\n}\n","// @flow\n\ndeclare var __DEV__: boolean;\ndeclare var __BROWSER__: boolean;\n\nimport type {\n  Ref,\n  StatelessFunctionalComponent,\n  ElementType,\n  ElementConfig,\n} from \"react\";\nimport React, {createElement, Component} from \"react\";\n\nimport createReactContext, {type Context} from \"create-react-context\";\n\nimport {addDebugMetadata, DebugEngine} from \"./dev-tool.js\";\n\nexport {DebugEngine};\n\nconst StyletronContext: Context<any> = createReactContext();\n\nconst HydrationContext: Context<boolean> = createReactContext(false);\n\nconst DebugEngineContext: Context<any> = createReactContext();\n\nclass DevProvider extends Component<any, {hydrating: boolean}> {\n  constructor(props: any) {\n    super();\n    this.state = {\n      hydrating: Boolean(props.debugAfterHydration),\n    };\n  }\n\n  componentDidMount() {\n    if (__BROWSER__) {\n      if (this.state.hydrating === true) {\n        this.setState({hydrating: false});\n      }\n    }\n  }\n\n  render() {\n    return (\n      <StyletronContext.Provider value={this.props.value}>\n        <DebugEngineContext.Provider value={this.props.debug}>\n          <HydrationContext.Provider value={this.state.hydrating}>\n            {this.props.children}\n          </HydrationContext.Provider>\n        </DebugEngineContext.Provider>\n      </StyletronContext.Provider>\n    );\n  }\n}\n\nexport const Provider =\n  __BROWSER__ && __DEV__ ? DevProvider : StyletronContext.Provider;\n\nexport function DevConsumer(props: any) {\n  return (\n    <StyletronContext.Consumer>\n      {styletronEngine => (\n        <DebugEngineContext.Consumer>\n          {debugEngine => (\n            <HydrationContext.Consumer>\n              {hydrating =>\n                props.children(styletronEngine, debugEngine, hydrating)\n              }\n            </HydrationContext.Consumer>\n          )}\n        </DebugEngineContext.Consumer>\n      )}\n    </StyletronContext.Consumer>\n  );\n}\n\nconst Consumer =\n  __BROWSER__ && __DEV__ ? DevConsumer : StyletronContext.Consumer;\n\nexport type styledElementProps<Base> = {\n  $as?: Base,\n  $ref?: Ref<*>,\n};\n\nexport type reducerT<Style: Object, Props: Object = {}> = (\n  style: Style,\n  props: Props,\n) => Style;\n\nexport type assignCommutativeReducerT<Style: Object> = reducerT<Style> & {\n  style: Style,\n  factory: Style => reducerT<Style>,\n};\n\nexport type assignCommutativeReducerItemT<Style: Object> = {|\n  assignCommutative: true,\n  reducer: assignCommutativeReducerT<Style>,\n|};\n\nexport type regularReducerItemT<Style: Object, Props: Object> = {|\n  assignCommutative: false,\n  reducer: reducerT<Style, Props>,\n|};\n\nexport type reducerItemT<Style: Object, Props: Object> =\n  | assignCommutativeReducerItemT<Style>\n  | regularReducerItemT<Style, Props>;\n\nexport type driverT<Style: Object, Engine> = (\n  style: Style,\n  styletron: Engine,\n) => string;\n\nexport type wrapperT = (\n  StatelessFunctionalComponent<*>,\n) => StatelessFunctionalComponent<*>;\n\n/* eslint-disable no-unused-vars */\nexport type styletronT<Style: Object, Props: Object, Base, Engine> = {|\n  // TODO: Variadic generics for multiple reducer prop types?\n  // Look into $Compose?\n  reducers: Array<reducerItemT<Style, any>>,\n  base: ElementType,\n  getInitialStyle: () => Style,\n  driver: driverT<Style, Engine>,\n  wrapper: any,\n  debugStackInfo?: any,\n  debugStackIndex?: any,\n|};\n/* eslint-enable no-unused-vars */\n\n/* eslint-disable no-unused-vars */\nexport type styletronComponentT<\n  Style: Object,\n  Props: Object,\n  Base,\n  Engine,\n> = StatelessFunctionalComponent<\n  Props &\n    styledElementProps<Base> &\n    $Diff<ElementConfig<Base>, {className: any}>,\n>;\n/* eslint-enable no-unused-vars */\n\nexport type styledFnT<Style: Object, Engine> = <Props: Object, Base>(\n  Base,\n  styleArgT<Style, Props>,\n) => styletronComponentT<Style, Props, Base, Engine>;\n\ntype styledConfig<Style: Object, Engine> = {\n  getInitialStyle: void => Style,\n  driver: driverT<Style, Engine>,\n  wrapper: wrapperT,\n};\n\nexport function createStyled<Style: Object, Engine>({\n  getInitialStyle,\n  driver,\n  wrapper,\n}: styledConfig<Style, Engine>): styledFnT<Style, Engine> {\n  return function styled<Props: Object, Base>(\n    base: Base,\n    styleArg: styleArgT<Style, Props>,\n  ): styletronComponentT<Style, Props, Base, Engine> {\n    const baseStyletron: styletronT<Style, {}, Base, Engine> = {\n      reducers: [],\n      // TODO: use typed generic instead of coercion once\n      // https://github.com/facebook/flow/issues/6157 is resolved\n      base: ((base: any): ElementType),\n      driver,\n      getInitialStyle,\n      wrapper,\n    };\n    if (__BROWSER__ && __DEV__) {\n      addDebugMetadata(baseStyletron, 2);\n    }\n    return createStyledElementComponent(\n      autoComposeShallow(baseStyletron, styleArg),\n    );\n  };\n}\n\nexport function withTransform<\n  Style: Object,\n  Props: Object,\n  Base,\n  TransformerProps: Object,\n  Engine,\n>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  transformer: (style: Style, props: TransformerProps) => Style,\n): styletronComponentT<Style, Props & TransformerProps, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(styletron, 2);\n  }\n\n  return createStyledElementComponent(\n    composeDynamic(styletron, {\n      assignCommutative: false,\n      reducer: transformer,\n    }),\n  );\n}\n\ntype styleFnArgT<Style: Object, Props: Object> = (props: Props) => Style;\n\nexport type styleArgT<Style: Object, Props: Object> =\n  | Style\n  | styleFnArgT<Style, Props>;\n\nexport function withStyle<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronComponentT<Style, Props & ReducerProps, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(styletron, 2);\n  }\n  return createStyledElementComponent(autoComposeShallow(styletron, styleArg));\n}\n\nexport function withStyleDeep<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronComponentT<Style, Props & ReducerProps, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(styletron, 2);\n  }\n  return createStyledElementComponent(autoComposeDeep(styletron, styleArg));\n}\n\nexport function withWrapper<Style: Object, Props: Object, Base, Engine>(\n  component: styletronComponentT<Style, Props, Base, Engine>,\n  wrapper: any,\n): styletronComponentT<Style, Props, Base, Engine> {\n  const styletron = (component: any).__STYLETRON__;\n  const composed = {\n    getInitialStyle: styletron.getInitialStyle,\n    base: styletron.base,\n    driver: styletron.driver,\n    wrapper: wrapper,\n    reducers: styletron.reducers,\n  };\n  if (__BROWSER__ && __DEV__) {\n    addDebugMetadata(composed, 2);\n  }\n  return createStyledElementComponent(composed);\n}\n\nexport function autoComposeShallow<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  if (typeof styleArg === \"function\") {\n    return dynamicComposeShallow(styletron, styleArg);\n  }\n  // TODO: investigate how to eliminate this casting\n  return (staticComposeShallow(styletron, styleArg): any);\n}\n\nexport function autoComposeDeep<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleArg: styleArgT<Style, ReducerProps>,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  if (typeof styleArg === \"function\") {\n    return dynamicComposeDeep(styletron, styleArg);\n  }\n  // TODO: investigate how to eliminate this casting\n  return (staticComposeDeep(styletron, styleArg): any);\n}\n\nexport function staticComposeShallow<\n  Style: Object,\n  Props: Object,\n  Base,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  style: Style,\n): styletronT<Style, Props, Base, Engine> {\n  return composeStatic(styletron, {\n    reducer: createShallowMergeReducer(style),\n    assignCommutative: true,\n  });\n}\n\nexport function staticComposeDeep<Style: Object, Props: Object, Base, Engine>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  style: Style,\n): styletronT<Style, Props, Base, Engine> {\n  return composeStatic(styletron, {\n    reducer: createDeepMergeReducer(style),\n    assignCommutative: true,\n  });\n}\n\nexport function dynamicComposeShallow<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleFn: (props: ReducerProps) => Style,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  return composeDynamic(styletron, {\n    assignCommutative: false,\n    reducer: toMergeReducer(styleFn, shallowMerge),\n  });\n}\n\nexport function dynamicComposeDeep<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  styleFn: (props: ReducerProps) => Style,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  return composeDynamic(styletron, {\n    assignCommutative: false,\n    reducer: toMergeReducer(styleFn, deepMerge),\n  });\n}\n\nexport function toMergeReducer<Style: Object, Props: Object>(\n  fn: (props: Props) => Style,\n  mergeFn: (a: Style, b: Style) => Style,\n): reducerT<Style, Props> {\n  return (style: Style, props: Props) => mergeFn(style, fn(props));\n}\n\nexport function createShallowMergeReducer<Style: Object>(\n  style: Style,\n): assignCommutativeReducerT<Style> {\n  // TODO: make this casting unnecessary\n  function shallowMergeReducer(inputStyle) {\n    return ((shallowMerge(inputStyle, style): any): Style);\n  }\n  shallowMergeReducer.factory = createShallowMergeReducer;\n  shallowMergeReducer.style = style;\n  return shallowMergeReducer;\n}\n\nexport function createDeepMergeReducer<Style: Object>(\n  style: Style,\n): assignCommutativeReducerT<Style> {\n  // TODO: make this casting unnecessary\n  function deepMergeReducer(inputStyle) {\n    return ((deepMerge(inputStyle, style): any): Style);\n  }\n  deepMergeReducer.factory = createDeepMergeReducer;\n  deepMergeReducer.style = style;\n  return deepMergeReducer;\n}\n\nexport function composeStatic<Style: Object, Props: Object, Base, Engine>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  reducer: reducerItemT<Style, Props>,\n): styletronT<Style, Props, Base, Engine> {\n  if (styletron.reducers.length === 0) {\n    // TODO: remove this casting\n    const style = reducer.reducer(styletron.getInitialStyle(), ({}: any));\n    return {\n      reducers: styletron.reducers,\n      base: styletron.base,\n      driver: styletron.driver,\n      debugStackIndex: styletron.debugStackIndex,\n      debugStackInfo: styletron.debugStackInfo,\n      wrapper: styletron.wrapper,\n      getInitialStyle: () => style,\n    };\n  } else {\n    const last = styletron.reducers[0];\n    if (last.assignCommutative === true && reducer.assignCommutative === true) {\n      // TODO: remove prop argument for static reducers\n      const composed = reducer.reducer(last.reducer.style, {});\n\n      return {\n        getInitialStyle: styletron.getInitialStyle,\n        base: styletron.base,\n        debugStackIndex: styletron.debugStackIndex,\n        debugStackInfo: styletron.debugStackInfo,\n        driver: styletron.driver,\n        wrapper: styletron.wrapper,\n        reducers: [\n          {\n            assignCommutative: true,\n            reducer: last.reducer.factory(composed),\n          },\n        ].concat(styletron.reducers.slice(1)),\n      };\n    }\n    return composeDynamic(styletron, reducer);\n  }\n}\n\nexport function composeDynamic<\n  Style: Object,\n  Props: Object,\n  Base,\n  ReducerProps: Object,\n  Engine,\n>(\n  styletron: styletronT<Style, Props, Base, Engine>,\n  reducer: reducerItemT<Style, ReducerProps>,\n): styletronT<Style, Props & ReducerProps, Base, Engine> {\n  return {\n    getInitialStyle: styletron.getInitialStyle,\n    base: styletron.base,\n    debugStackIndex: styletron.debugStackIndex,\n    debugStackInfo: styletron.debugStackInfo,\n    driver: styletron.driver,\n    wrapper: styletron.wrapper,\n    reducers: [reducer].concat(styletron.reducers),\n  };\n}\n\nexport function createStyledElementComponent<\n  Style: Object,\n  Props: Object,\n  Base,\n  Engine,\n>({\n  reducers,\n  base,\n  driver,\n  debugStackInfo,\n  debugStackIndex,\n  wrapper,\n  getInitialStyle,\n}: styletronT<Style, Props, Base, Engine>): styletronComponentT<\n  Style,\n  Props,\n  Base,\n  Engine,\n> {\n  // TODO: make casting not necessary\n  function omitPrefixedKeys<T>(source: T): $Diff<T, Props> {\n    const result = ({}: any);\n    for (const key in (source: any)) {\n      if (key[0] !== \"$\") {\n        result[key] = (source: any)[key];\n      }\n    }\n    return ((result: any): $Diff<T, Props>);\n  }\n\n  if (__DEV__ && __BROWSER__) {\n    var debugClassName;\n  }\n\n  function StyledElement(props) {\n    return (\n      <Consumer>\n        {(styletron, debugEngine, hydrating) => {\n          if (__DEV__ && styletron === void 0) {\n            throw new Error(`\nA Styletron styled component was rendered, but no Styletron engine instance was provided in React context.\n\nDid you forget to provide a Styletron engine instance to React context via using the Styletron provider component?\n\nNote: Providers and Consumers must come from the exact same React.createContext call to work.\nIf your app has multiple instances of the \"styletron-react-core\" package in your node_module tree,\nyour Provider may be coming from a different React.createContext call, which means the styled components\nwill not recieve the provided engine instance. This scenario can arise, for example, when using \"npm link\".\n`);\n          }\n\n          const elementProps = omitPrefixedKeys(props);\n          const style = resolveStyle(getInitialStyle, reducers, props);\n          const styleClassString = driver(style, styletron);\n          const element = props.$as ? props.$as : base;\n\n          elementProps.className = props.className\n            ? `${props.className} ${styleClassString}`\n            : styleClassString;\n\n          if (__DEV__ && __BROWSER__ && debugEngine && !hydrating) {\n            if (!debugClassName) {\n              debugClassName = debugEngine.debug({\n                stackInfo: debugStackInfo,\n                stackIndex: debugStackIndex,\n              });\n            }\n            const joined = `${debugClassName} ${elementProps.className}`;\n            elementProps.className = joined;\n          }\n\n          if (props.$ref) {\n            elementProps.ref = props.$ref;\n          }\n\n          return createElement(element, elementProps);\n        }}\n      </Consumer>\n    );\n  }\n\n  const Wrapped = wrapper(StyledElement);\n\n  Wrapped.__STYLETRON__ = {base, reducers, driver, wrapper, getInitialStyle};\n\n  if (__DEV__) {\n    let displayName;\n    if (typeof base === \"string\") {\n      displayName = base;\n    } else if (base.displayName) {\n      displayName = base.displayName;\n    } else if (base.name) {\n      displayName = base.name;\n    } else {\n      displayName = \"Unknown\";\n    }\n    Wrapped.displayName = `Styled(${displayName})`;\n  }\n  return Wrapped;\n}\n\nexport function resolveStyle<Style: Object, Props: Object>(\n  getInitialStyle: () => Style,\n  reducers: Array<reducerItemT<Style, Props>>,\n  props: Props,\n): Style {\n  let result = getInitialStyle();\n  let i = reducers.length;\n  while (i--) {\n    result = reducers[i].reducer(result, props);\n  }\n  return result;\n}\n\nexport function isObject(x: any) {\n  return typeof x === \"object\" && x !== null;\n}\n\nexport function deepMerge<Style: Object>(a: Style, b: Style): Style {\n  const result = assign({}, a);\n  for (const key in b) {\n    const val = b[key];\n    if (isObject(val) && isObject(a[key])) {\n      result[key] = deepMerge(a[key], val);\n    } else {\n      result[key] = val;\n    }\n  }\n  // TODO: make this casting unecessary\n  return (result: any);\n}\n\nexport function shallowMerge<Style: Object>(a: Style, b: Style): Style {\n  // TODO: make this casting unecessary\n  return assign(assign((({}: any): Style), a), b);\n}\n\nexport function assign<Style: Object>(target: Style, source: Style): Style {\n  for (const key in source) {\n    target[key] = source[key];\n  }\n  return target;\n}\n"],"names":["addDebugMetadata","instance","stackIndex","Error","stack","stacktrace","message","debugStackInfo","debugStackIndex","DebugEngine","worker","workerBlob","Blob","Worker","URL","createObjectURL","postMessage","module","hot","addStatusHandler","status","counter","onmessage","msg","data","id","css","style","document","createElement","appendChild","createTextNode","head","debug","stackInfo","className","StyletronContext","createReactContext","HydrationContext","DebugEngineContext","DevProvider","props","state","Boolean","debugAfterHydration","componentDidMount","hydrating","setState","render","React","value","children","Component","Provider","DevConsumer","styletronEngine","debugEngine","Consumer","createStyled","getInitialStyle","driver","wrapper","styled","base","styleArg","baseStyletron","createStyledElementComponent","autoComposeShallow","withTransform","component","transformer","styletron","__STYLETRON__","composeDynamic","withStyle","withStyleDeep","autoComposeDeep","withWrapper","composed","reducers","dynamicComposeShallow","staticComposeShallow","dynamicComposeDeep","staticComposeDeep","composeStatic","createShallowMergeReducer","createDeepMergeReducer","styleFn","toMergeReducer","shallowMerge","deepMerge","fn","mergeFn","shallowMergeReducer","inputStyle","factory","deepMergeReducer","reducer","length","last","assignCommutative","concat","slice","omitPrefixedKeys","source","result","key","debugClassName","StyledElement","elementProps","resolveStyle","styleClassString","element","$as","joined","$ref","ref","Wrapped","displayName","name","i","isObject","x","a","b","assign","val","target"],"mappings":"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"}